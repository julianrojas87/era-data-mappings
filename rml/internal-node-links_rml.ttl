@prefix rr: <http://www.w3.org/ns/r2rml#>.
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>.
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.
@prefix fnml: <http://semweb.mmlab.be/ns/fnml#>.
@prefix fno: <https://w3id.org/function/ontology#>.
@prefix d2rq: <http://www.wiwiss.fu-berlin.de/suhl/bizer/D2RQ/0.1#>.
@prefix rml: <http://semweb.mmlab.be/ns/rml#>.
@prefix ql: <http://semweb.mmlab.be/ns/ql#>.
@prefix : <http://mapping.example.com/>.
@prefix era: <http://era.europa.eu/ns#>.
@prefix xsd: <http://www.w3.org/2001/XMLSchema#>.

:map_internal-node-link-in-out_0 rml:logicalSource :source_0.
:source_0 a rml:LogicalSource;
    rml:source :database_0;
    rml:query "SELECT (SELECT TRIM(UOPID) FROM RINF.dbo.OperationalPoints, RINF.dbo.LineNodes WHERE LineNodes.OperationalPointID = OperationalPoints.ID AND LineNodes.ID = LineEdges2.LineNodeStartID AND OperationalPoints.VersionID=LineNodes.VersionID) AS INCOMING_REMOTE_OP, Tracks2.UUID AS INCOMING, TRIM(OP2.UOPID) AS UOPID, Tracks1.UUID AS OUTGOING, (SELECT TRIM(UOPID) FROM RINF.dbo.OperationalPoints, RINF.dbo.LineNodes WHERE LineNodes.OperationalPointID = OperationalPoints.ID AND LineNodes.ID = LineEdges1.LineNodeEndID AND OperationalPoints.VersionID=LineNodes.VersionID) AS OUTGOING_REMOTE_OP FROM RINF.dbo.Tracks AS Tracks2, RINF.dbo.SOLTracks AS SOLTracks2, RINF.dbo.SectionOfLines AS SectionOfLines2, RINF.dbo.Tracks AS Tracks1, RINF.dbo.SOLTracks AS SOLTracks1, RINF.dbo.SectionOfLines AS SectionOfLines1, RINF.dbo.LineEdges AS LineEdges2, RINF.dbo.LineEdges AS LineEdges1, RINF.dbo.LineNodes AS LineNodes1, RINF.dbo.LineNodes AS LineNodes2, RINF.dbo.OperationalPoints AS OP1, RINF.dbo.OperationalPoints AS OP2, RINF.dbo.LookupValues WHERE Tracks2.ID = SOLTracks2.TrackID AND SOLTracks2.SectionOfLineID = SectionOfLines2.ID AND SectionOfLines2.LineEdgeID = LineEdges2.ID AND Tracks2.VersionID = LineEdges2.VersionID AND Tracks1.ID = SOLTracks1.TrackID AND SOLTracks1.SectionOfLineID = SectionOfLines1.ID AND SectionOfLines1.LineEdgeID = LineEdges1.ID AND Tracks1.VersionID = LineEdges1.VersionID AND LineEdges2.LineNodeEndID = LineNodes2.ID AND LineEdges2.VersionID = LineNodes2.VersionID AND LineEdges1.LineNodeStartID = LineNodes1.ID AND LineEdges1.VersionID = LineNodes1.VersionID AND LineEdges1.ID != LineEdges2.ID AND LineNodes2.OperationalPointID = OP2.ID AND LineNodes1.OperationalPointID = OP1.ID AND LineNodes2.VersionID = OP2.VersionID AND LineNodes1.VersionID = OP1.VersionID AND OP2.UOPID = OP1.UOPID AND OP1.[Type] = LookupValues.ID AND OP2.[Type] = LookupValues.ID;".
:database_0 a d2rq:Database;
    d2rq:jdbcDSN "//10.10.160.21:1433";
    d2rq:jdbcDriver "com.microsoft.sqlserver.jdbc.SQLServerDriver";
    d2rq:username "SA";
    d2rq:password "ChooChoo2020".
:source_0 rml:referenceFormulation ql:CSV.
:map_internal-node-link-in-out_0 a rr:TriplesMap;
    rdfs:label "internal-node-link-in-out".
:s_0 a rr:SubjectMap.
:map_internal-node-link-in-out_0 rr:subjectMap :s_0.
:s_0 rr:template "http://era.europa.eu/abstraction#INL_{INCOMING_REMOTE_OP}_{INCOMING}_{UOPID}_{OUTGOING}_{OUTGOING_REMOTE_OP}".
:pom_0 a rr:PredicateObjectMap.
:map_internal-node-link-in-out_0 rr:predicateObjectMap :pom_0.
:pm_0 a rr:PredicateMap.
:pom_0 rr:predicateMap :pm_0.
:pm_0 rr:constant rdf:type.
:pom_0 rr:objectMap :om_0.
:om_0 a rr:ObjectMap;
    rr:constant "http://era.europa.eu/ns#InternalNodeLink";
    rr:termType rr:IRI.
:pom_1 a rr:PredicateObjectMap.
:map_internal-node-link-in-out_0 rr:predicateObjectMap :pom_1.
:pm_1 a rr:PredicateMap.
:pom_1 rr:predicateMap :pm_1.
:pm_1 rr:constant era:bidirectional.
:pom_1 rr:objectMap :om_1.
:om_1 a rr:ObjectMap;
    rr:constant "false";
    rr:termType rr:Literal;
    rr:datatype xsd:boolean.
:pom_2 a rr:PredicateObjectMap.
:map_internal-node-link-in-out_0 rr:predicateObjectMap :pom_2.
:pm_2 a rr:PredicateMap.
:pom_2 rr:predicateMap :pm_2.
:pm_2 rr:constant era:startPort.
:pom_2 rr:objectMap :om_2.
:om_2 a rr:ObjectMap;
    rr:template "http://era.europa.eu/abstraction#NP_{UOPID}_{INCOMING}_{INCOMING_REMOTE_OP}";
    rr:termType rr:IRI.
:pom_3 a rr:PredicateObjectMap.
:map_internal-node-link-in-out_0 rr:predicateObjectMap :pom_3.
:pm_3 a rr:PredicateMap.
:pom_3 rr:predicateMap :pm_3.
:pm_3 rr:constant era:endPort.
:pom_3 rr:objectMap :om_3.
:om_3 a rr:ObjectMap;
    rr:template "http://era.europa.eu/abstraction#NP_{UOPID}_{OUTGOING}_{OUTGOING_REMOTE_OP}";
    rr:termType rr:IRI.
:map_internal-node-link-out-in_0 rml:logicalSource :source_1.
:source_1 a rml:LogicalSource;
    rml:source :database_1;
    rml:query "SELECT (SELECT TRIM(UOPID) FROM RINF.dbo.OperationalPoints, RINF.dbo.LineNodes WHERE LineNodes.OperationalPointID = OperationalPoints.ID AND LineNodes.ID = LineEdges2.LineNodeEndID AND OperationalPoints.VersionID=LineNodes.VersionID) AS INCOMING_REMOTE_OP, Tracks2.UUID AS INCOMING, TRIM(OP2.UOPID) AS UOPID, Tracks1.UUID AS OUTGOING, (SELECT TRIM(UOPID) FROM RINF.dbo.OperationalPoints, RINF.dbo.LineNodes WHERE LineNodes.OperationalPointID = OperationalPoints.ID AND LineNodes.ID = LineEdges1.LineNodeStartID AND OperationalPoints.VersionID=LineNodes.VersionID) AS OUTGOING_REMOTE_OP FROM RINF.dbo.Tracks AS Tracks2, RINF.dbo.SOLTracks AS SOLTracks2, RINF.dbo.SectionOfLines AS SectionOfLines2, RINF.dbo.Tracks AS Tracks1, RINF.dbo.SOLTracks AS SOLTracks1, RINF.dbo.SectionOfLines AS SectionOfLines1, RINF.dbo.LineEdges AS LineEdges2, RINF.dbo.LineEdges AS LineEdges1, RINF.dbo.LineNodes AS LineNodes1, RINF.dbo.LineNodes AS LineNodes2, RINF.dbo.OperationalPoints AS OP1, RINF.dbo.OperationalPoints AS OP2, RINF.dbo.LookupValues WHERE Tracks2.ID = SOLTracks2.TrackID AND SOLTracks2.SectionOfLineID = SectionOfLines2.ID AND SectionOfLines2.LineEdgeID = LineEdges2.ID AND Tracks2.VersionID = LineEdges2.VersionID AND Tracks1.ID = SOLTracks1.TrackID AND SOLTracks1.SectionOfLineID = SectionOfLines1.ID AND SectionOfLines1.LineEdgeID = LineEdges1.ID AND Tracks1.VersionID = LineEdges1.VersionID AND Tracks2.ID != Tracks1.ID AND LineEdges2.LineNodeStartID = LineNodes2.ID AND LineEdges1.LineNodeEndID = LineNodes1.ID AND LineEdges2.VersionID = LineNodes2.VersionID AND LineEdges1.VersionID = LineNodes1.VersionID AND LineNodes2.OperationalPointID = OP2.ID AND LineNodes1.OperationalPointID = OP1.ID AND LineNodes2.VersionID = OP2.VersionID AND LineNodes1.VersionID = OP1.VersionID AND OP2.UOPID = OP1.UOPID AND OP1.[Type] = LookupValues.ID AND OP2.[Type] = LookupValues.ID;".
:database_1 a d2rq:Database;
    d2rq:jdbcDSN "//10.10.160.21:1433";
    d2rq:jdbcDriver "com.microsoft.sqlserver.jdbc.SQLServerDriver";
    d2rq:username "SA";
    d2rq:password "ChooChoo2020".
:source_1 rml:referenceFormulation ql:CSV.
:map_internal-node-link-out-in_0 a rr:TriplesMap;
    rdfs:label "internal-node-link-out-in".
:s_1 a rr:SubjectMap.
:map_internal-node-link-out-in_0 rr:subjectMap :s_1.
:s_1 rr:template "http://era.europa.eu/abstraction#INL_{INCOMING_REMOTE_OP}_{INCOMING}_{UOPID}_{OUTGOING}_{OUTGOING_REMOTE_OP}".
:pom_4 a rr:PredicateObjectMap.
:map_internal-node-link-out-in_0 rr:predicateObjectMap :pom_4.
:pm_4 a rr:PredicateMap.
:pom_4 rr:predicateMap :pm_4.
:pm_4 rr:constant rdf:type.
:pom_4 rr:objectMap :om_4.
:om_4 a rr:ObjectMap;
    rr:constant "http://era.europa.eu/ns#InternalNodeLink";
    rr:termType rr:IRI.
:pom_5 a rr:PredicateObjectMap.
:map_internal-node-link-out-in_0 rr:predicateObjectMap :pom_5.
:pm_5 a rr:PredicateMap.
:pom_5 rr:predicateMap :pm_5.
:pm_5 rr:constant era:bidirectional.
:pom_5 rr:objectMap :om_5.
:om_5 a rr:ObjectMap;
    rr:constant "false";
    rr:termType rr:Literal;
    rr:datatype xsd:boolean.
:pom_6 a rr:PredicateObjectMap.
:map_internal-node-link-out-in_0 rr:predicateObjectMap :pom_6.
:pm_6 a rr:PredicateMap.
:pom_6 rr:predicateMap :pm_6.
:pm_6 rr:constant era:startPort.
:pom_6 rr:objectMap :om_6.
:om_6 a rr:ObjectMap;
    rr:template "http://era.europa.eu/abstraction#NP_{UOPID}_{INCOMING}_{INCOMING_REMOTE_OP}";
    rr:termType rr:IRI.
:pom_7 a rr:PredicateObjectMap.
:map_internal-node-link-out-in_0 rr:predicateObjectMap :pom_7.
:pm_7 a rr:PredicateMap.
:pom_7 rr:predicateMap :pm_7.
:pm_7 rr:constant era:endPort.
:pom_7 rr:objectMap :om_7.
:om_7 a rr:ObjectMap;
    rr:template "http://era.europa.eu/abstraction#NP_{UOPID}_{OUTGOING}_{OUTGOING_REMOTE_OP}";
    rr:termType rr:IRI.
:map_internal-node-link-no-out_0 rml:logicalSource :source_2.
:source_2 a rml:LogicalSource;
    rml:source :database_2;
    rml:query "SELECT (SELECT TRIM(UOPID) FROM RINF.dbo.OperationalPoints, RINF.dbo.LineNodes WHERE LineNodes.OperationalPointID = OperationalPoints.ID AND LineNodes.ID = LineEdges2.LineNodeStartID AND OperationalPoints.VersionID=LineNodes.VersionID) AS INCOMING_REMOTE_OP, Tracks2.UUID AS INCOMING, TRIM(OP2.UOPID) AS UOPID, Tracks1.UUID AS OUTGOING, (SELECT TRIM(UOPID) FROM RINF.dbo.OperationalPoints, RINF.dbo.LineNodes WHERE LineNodes.OperationalPointID = OperationalPoints.ID AND LineNodes.ID = LineEdges1.LineNodeStartID AND OperationalPoints.VersionID=LineNodes.VersionID) AS OUTGOING_REMOTE_OP FROM RINF.dbo.Tracks AS Tracks2, RINF.dbo.SOLTracks AS SOLTracks2, RINF.dbo.SectionOfLines AS SectionOfLines2, RINF.dbo.Tracks AS Tracks1, RINF.dbo.SOLTracks AS SOLTracks1, RINF.dbo.SectionOfLines AS SectionOfLines1, RINF.dbo.LineEdges AS LineEdges2, RINF.dbo.LineEdges AS LineEdges1, RINF.dbo.LineNodes AS LineNodes1, RINF.dbo.LineNodes AS LineNodes2, RINF.dbo.OperationalPoints AS OP1, RINF.dbo.OperationalPoints AS OP2, RINF.dbo.LookupValues WHERE Tracks2.ID = SOLTracks2.TrackID AND SOLTracks2.SectionOfLineID = SectionOfLines2.ID AND SectionOfLines2.LineEdgeID = LineEdges2.ID AND Tracks2.VersionID = LineEdges2.VersionID AND Tracks1.ID = SOLTracks1.TrackID AND SOLTracks1.SectionOfLineID = SectionOfLines1.ID AND SectionOfLines1.LineEdgeID = LineEdges1.ID AND Tracks1.VersionID = LineEdges1.VersionID AND Tracks2.ID != Tracks1.ID AND LineEdges2.LineNodeEndID = LineNodes2.ID AND LineEdges2.VersionID = LineNodes2.VersionID AND LineEdges1.LineNodeEndID = LineNodes1.ID AND LineEdges1.VersionID = LineNodes1.VersionID AND LineNodes2.OperationalPointID = OP2.ID AND LineNodes1.OperationalPointID = OP1.ID AND LineNodes2.VersionID = OP2.VersionID AND LineNodes1.VersionID = OP1.VersionID AND OP2.UOPID = OP1.UOPID AND OP1.[Type] = LookupValues.ID AND OP2.[Type] = LookupValues.ID;".
:database_2 a d2rq:Database;
    d2rq:jdbcDSN "//10.10.160.21:1433";
    d2rq:jdbcDriver "com.microsoft.sqlserver.jdbc.SQLServerDriver";
    d2rq:username "SA";
    d2rq:password "ChooChoo2020".
:source_2 rml:referenceFormulation ql:CSV.
:map_internal-node-link-no-out_0 a rr:TriplesMap;
    rdfs:label "internal-node-link-no-out".
:s_2 a rr:SubjectMap.
:map_internal-node-link-no-out_0 rr:subjectMap :s_2.
:s_2 rr:template "http://era.europa.eu/abstraction#INL_{INCOMING_REMOTE_OP}_{INCOMING}_{UOPID}_{OUTGOING}_{OUTGOING_REMOTE_OP}".
:pom_8 a rr:PredicateObjectMap.
:map_internal-node-link-no-out_0 rr:predicateObjectMap :pom_8.
:pm_8 a rr:PredicateMap.
:pom_8 rr:predicateMap :pm_8.
:pm_8 rr:constant rdf:type.
:pom_8 rr:objectMap :om_8.
:om_8 a rr:ObjectMap;
    rr:constant "http://era.europa.eu/ns#InternalNodeLink";
    rr:termType rr:IRI.
:pom_9 a rr:PredicateObjectMap.
:map_internal-node-link-no-out_0 rr:predicateObjectMap :pom_9.
:pm_9 a rr:PredicateMap.
:pom_9 rr:predicateMap :pm_9.
:pm_9 rr:constant era:bidirectional.
:pom_9 rr:objectMap :om_9.
:om_9 a rr:ObjectMap;
    rr:constant "false";
    rr:termType rr:Literal;
    rr:datatype xsd:boolean.
:pom_10 a rr:PredicateObjectMap.
:map_internal-node-link-no-out_0 rr:predicateObjectMap :pom_10.
:pm_10 a rr:PredicateMap.
:pom_10 rr:predicateMap :pm_10.
:pm_10 rr:constant era:startPort.
:pom_10 rr:objectMap :om_10.
:om_10 a rr:ObjectMap;
    rr:template "http://era.europa.eu/abstraction#NP_{UOPID}_{INCOMING}_{INCOMING_REMOTE_OP}";
    rr:termType rr:IRI.
:pom_11 a rr:PredicateObjectMap.
:map_internal-node-link-no-out_0 rr:predicateObjectMap :pom_11.
:pm_11 a rr:PredicateMap.
:pom_11 rr:predicateMap :pm_11.
:pm_11 rr:constant era:endPort.
:pom_11 rr:objectMap :om_11.
:om_11 a rr:ObjectMap;
    rr:template "http://era.europa.eu/abstraction#NP_{UOPID}_{OUTGOING}_{OUTGOING_REMOTE_OP}";
    rr:termType rr:IRI.
:map_internal-node-link-no-in_0 rml:logicalSource :source_3.
:source_3 a rml:LogicalSource;
    rml:source :database_3;
    rml:query "SELECT (SELECT TRIM(UOPID) FROM RINF.dbo.OperationalPoints, RINF.dbo.LineNodes WHERE LineNodes.OperationalPointID = OperationalPoints.ID AND LineNodes.ID = LineEdges2.LineNodeEndID AND OperationalPoints.VersionID=LineNodes.VersionID) AS INCOMING_REMOTE_OP, Tracks2.UUID AS INCOMING, TRIM(OP2.UOPID) AS UOPID, Tracks1.UUID AS OUTGOING, (SELECT TRIM(UOPID) FROM RINF.dbo.OperationalPoints, RINF.dbo.LineNodes WHERE LineNodes.OperationalPointID = OperationalPoints.ID AND LineNodes.ID = LineEdges1.LineNodeEndID AND OperationalPoints.VersionID=LineNodes.VersionID) AS OUTGOING_REMOTE_OP FROM RINF.dbo.Tracks AS Tracks2, RINF.dbo.SOLTracks AS SOLTracks2, RINF.dbo.SectionOfLines AS SectionOfLines2, RINF.dbo.Tracks AS Tracks1, RINF.dbo.SOLTracks AS SOLTracks1, RINF.dbo.SectionOfLines AS SectionOfLines1, RINF.dbo.LineEdges AS LineEdges2, RINF.dbo.LineEdges AS LineEdges1, RINF.dbo.LineNodes AS LineNodes1, RINF.dbo.LineNodes AS LineNodes2, RINF.dbo.OperationalPoints AS OP1, RINF.dbo.OperationalPoints AS OP2, RINF.dbo.LookupValues WHERE Tracks2.ID = SOLTracks2.TrackID AND SOLTracks2.SectionOfLineID = SectionOfLines2.ID AND SectionOfLines2.LineEdgeID = LineEdges2.ID AND Tracks2.VersionID = LineEdges2.VersionID AND Tracks1.ID = SOLTracks1.TrackID AND SOLTracks1.SectionOfLineID = SectionOfLines1.ID AND SectionOfLines1.LineEdgeID = LineEdges1.ID AND Tracks1.VersionID = LineEdges1.VersionID AND Tracks2.ID != Tracks1.ID AND LineEdges2.LineNodeStartID = LineNodes2.ID AND LineEdges2.VersionID = LineNodes2.VersionID AND LineEdges1.LineNodeStartID = LineNodes1.ID AND LineEdges1.VersionID = LineNodes1.VersionID AND LineNodes2.OperationalPointID = OP2.ID AND LineNodes1.OperationalPointID = OP1.ID AND LineNodes2.VersionID = OP2.VersionID AND LineNodes1.VersionID = OP1.VersionID AND OP2.UOPID = OP1.UOPID AND OP1.[Type] = LookupValues.ID AND OP2.[Type] = LookupValues.ID".
:database_3 a d2rq:Database;
    d2rq:jdbcDSN "//10.10.160.21:1433";
    d2rq:jdbcDriver "com.microsoft.sqlserver.jdbc.SQLServerDriver";
    d2rq:username "SA";
    d2rq:password "ChooChoo2020".
:source_3 rml:referenceFormulation ql:CSV.
:map_internal-node-link-no-in_0 a rr:TriplesMap;
    rdfs:label "internal-node-link-no-in".
:s_3 a rr:SubjectMap.
:map_internal-node-link-no-in_0 rr:subjectMap :s_3.
:s_3 rr:template "http://era.europa.eu/abstraction#INL_{INCOMING_REMOTE_OP}_{INCOMING}_{UOPID}_{OUTGOING}_{OUTGOING_REMOTE_OP}".
:pom_12 a rr:PredicateObjectMap.
:map_internal-node-link-no-in_0 rr:predicateObjectMap :pom_12.
:pm_12 a rr:PredicateMap.
:pom_12 rr:predicateMap :pm_12.
:pm_12 rr:constant rdf:type.
:pom_12 rr:objectMap :om_12.
:om_12 a rr:ObjectMap;
    rr:constant "http://era.europa.eu/ns#InternalNodeLink";
    rr:termType rr:IRI.
:pom_13 a rr:PredicateObjectMap.
:map_internal-node-link-no-in_0 rr:predicateObjectMap :pom_13.
:pm_13 a rr:PredicateMap.
:pom_13 rr:predicateMap :pm_13.
:pm_13 rr:constant era:bidirectional.
:pom_13 rr:objectMap :om_13.
:om_13 a rr:ObjectMap;
    rr:constant "false";
    rr:termType rr:Literal;
    rr:datatype xsd:boolean.
:pom_14 a rr:PredicateObjectMap.
:map_internal-node-link-no-in_0 rr:predicateObjectMap :pom_14.
:pm_14 a rr:PredicateMap.
:pom_14 rr:predicateMap :pm_14.
:pm_14 rr:constant era:startPort.
:pom_14 rr:objectMap :om_14.
:om_14 a rr:ObjectMap;
    rr:template "http://era.europa.eu/abstraction#NP_{UOPID}_{INCOMING}_{INCOMING_REMOTE_OP}";
    rr:termType rr:IRI.
:pom_15 a rr:PredicateObjectMap.
:map_internal-node-link-no-in_0 rr:predicateObjectMap :pom_15.
:pm_15 a rr:PredicateMap.
:pom_15 rr:predicateMap :pm_15.
:pm_15 rr:constant era:endPort.
:pom_15 rr:objectMap :om_15.
:om_15 a rr:ObjectMap;
    rr:template "http://era.europa.eu/abstraction#NP_{UOPID}_{OUTGOING}_{OUTGOING_REMOTE_OP}";
    rr:termType rr:IRI.
