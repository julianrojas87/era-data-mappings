prefixes:
  idlab-fn: "http://example.com/idlab/function/"
  grel: "http://users.ugent.be/~bjdmeest/function/grel.ttl#"
  rdfs: "http://www.w3.org/2000/01/rdf-schema#"
  era: "http://era.europa.eu/ns#"
  xsd: "http://www.w3.org/2001/XMLSchema#"
  era-nv: "http://era.europa.eu/concepts/navigabilities#"

variables:
  connection: 
    access: &host ${RINF_HOST}
    type: &typeMSSQL mssql
    credentials: &credentials
      username: ${RINF_USER}
      password: ${RINF_PWD}
    queryFormulation: &queryFormulation sql2008 
    referenceFormulation: &referenceFormulation csv

mappings:
  # ------------Link RINF operational points to correspondent RailML Meso NetElements--------------

  rinf-operational-points: # NOTE: RINF query is restricted to Norwegian operational points only.
    sources:
      - access: *host
        type: *typeMSSQL
        credentials: *credentials
        queryFormulation: *queryFormulation
        referenceFormulation: *referenceFormulation
        query: SELECT TRIM(UOPID) AS UOPID, CONCAT(LineReferences.Kilometer * 1000, '.0') AS Kilometer FROM RINF.dbo.OperationalPoints, RINF.dbo.LineReferences, RINF.dbo.MemberStateVersions, RINF.dbo.MemberStates WHERE OperationalPoints.ID = LineReferences.OperationalPointId AND OperationalPoints.VersionID = LineReferences.VersionID AND OperationalPoints.VersionID = MemberStateVersions.ID AND MemberStateVersions.MemberStateID = MemberStates.ID AND MemberStates.Code = 'NO';
    s: http://era.europa.eu/functionalInfrastructure/operationalPoints#$(UOPID)
    po:
      - p: era:hasAbstraction
        o:
          - mapping: ARB-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: BB-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: BRB-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o] 
          - mapping: DB1-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: DB2-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: DOB1-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: DOB2-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: DOB3-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: DOB4-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: FLB-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: GB-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: GMB1-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: GMB2-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: GMB3-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: GMB4-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: HB1-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: HB2-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: KB1-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: KB2-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: MB-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: NB1-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: NB2-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: OB-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: OEB1-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: OEB2-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: OEB3-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: OEOEB-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: OSL-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: RAB-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: RB-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: RHB-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: RUB-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: SB1-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: SB2-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: SB3-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: SOB-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: SPB-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: TIB-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: VB1-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          - mapping: VB2-railml-meso-net-elements
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, $(Kilometer), s]
                - [grel:valueParameter2, "$(ancestor::infrastructure//operationalPoint[.//associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", o]
          

  # ------------Link Meso NetElements to RINF Operational Points--------------
  
  ARB-railml-meso-net-elements:
    source:
      - [data/norway-railml/ARB.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  BB-railml-meso-net-elements:
    source:
      - [data/norway-railml/BB.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  BRB-railml-meso-net-elements:
    source:
      - [data/norway-railml/BRB.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]

  DB1-railml-meso-net-elements:
    source:
      - [data/norway-railml/DB1.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]

  DB2-railml-meso-net-elements:
    source:
      - [data/norway-railml/DB2.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  DOB1-railml-meso-net-elements:
    source:
      - [data/norway-railml/DOB1.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  DOB2-railml-meso-net-elements:
    source:
      - [data/norway-railml/DOB2.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  DOB3-railml-meso-net-elements:
    source:
      - [data/norway-railml/DOB3.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  DOB4-railml-meso-net-elements:
    source:
      - [data/norway-railml/DOB4.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  FLB-railml-meso-net-elements:
    source:
      - [data/norway-railml/FLB.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  GB-railml-meso-net-elements:
    source:
      - [data/norway-railml/GB.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  GMB1-railml-meso-net-elements:
    source:
      - [data/norway-railml/GMB1.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  GMB2-railml-meso-net-elements:
    source:
      - [data/norway-railml/GMB2.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  GMB3-railml-meso-net-elements:
    source:
      - [data/norway-railml/GMB3.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  GMB4-railml-meso-net-elements:
    source:
      - [data/norway-railml/GMB4.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  HB1-railml-meso-net-elements:
    source:
      - [data/norway-railml/HB1.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  HB2-railml-meso-net-elements:
    source:
      - [data/norway-railml/HB2.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  KB1-railml-meso-net-elements:
    source:
      - [data/norway-railml/KB1.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  KB2-railml-meso-net-elements:
    source:
      - [data/norway-railml/KB2.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  MB-railml-meso-net-elements:
    source:
      - [data/norway-railml/MB.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  NB1-railml-meso-net-elements:
    source:
      - [data/norway-railml/NB1.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  NB2-railml-meso-net-elements:
    source:
      - [data/norway-railml/NB2.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  OB-railml-meso-net-elements:
    source:
      - [data/norway-railml/OB.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  OEB1-railml-meso-net-elements:
    source:
      - [data/norway-railml/OEB1.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  OEB2-railml-meso-net-elements:
    source:
      - [data/norway-railml/OEB2.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  OEB3-railml-meso-net-elements:
    source:
      - [data/norway-railml/OEB3.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  OEOEB-railml-meso-net-elements:
    source:
      - [data/norway-railml/OEOEB.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  OSL-railml-meso-net-elements:
    source:
      - [data/norway-railml/OSL.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  RAB-railml-meso-net-elements:
    source:
      - [data/norway-railml/RAB.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  RB-railml-meso-net-elements:
    source:
      - [data/norway-railml/RB.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  RHB-railml-meso-net-elements:
    source:
      - [data/norway-railml/RHB.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  RUB-railml-meso-net-elements:
    source:
      - [data/norway-railml/RUB.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]

  SB1-railml-meso-net-elements:
    source:
      - [data/norway-railml/SB1.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  SB2-railml-meso-net-elements:
    source:
      - [data/norway-railml/SB2.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  SB3-railml-meso-net-elements:
    source:
      - [data/norway-railml/SB3.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  SOB-railml-meso-net-elements:
    source:
      - [data/norway-railml/SOB.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  SPB-railml-meso-net-elements:
    source:
      - [data/norway-railml/SPB.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  TIB-railml-meso-net-elements:
    source:
      - [data/norway-railml/TIB.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  VB1-railml-meso-net-elements:
    source:
      - [data/norway-railml/VB1.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]
  
  VB2-railml-meso-net-elements:
    source:
      - [data/norway-railml/VB2.railml~xpath, "//netElement[not(@length)]"]
    s: 
      function: grel:array_join
      parameters:
        - [grel:p_array_a, "http://era.europa.eu/topology/netElements#"]
        - [grel:p_array_a, "$(name/@name)"]
        - [grel:p_array_a, "$(@id)"]
    po:
      - p: era:hasImplementation
        o: 
          - mapping: rinf-operational-points
            condition:
              function: idlab-fn:equal
              parameters:
                - [grel:valueParameter, "$(ancestor::infrastructure//operationalPoint[./areaLocation/associatedNetElement/@netElementRef=current(\\)/@id]/spotLocation/linearCoordinate/@measure)", s]
                - [grel:valueParameter2, $(Kilometer), o]